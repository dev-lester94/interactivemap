{"ast":null,"code":"var _jsxFileName = \"/Users/reisturm/Desktop/Projects/interactivemap/src/components/Searchbar.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../css/Searchbar.css';\nimport Suggestions from './Suggestions'; // export class Searchbar extends Component {\n//   state = {\n//     query: '',\n//     buildings: []\n//   };\n//   getInfo = () => {\n//     axios.get('http://localhost:4000/polygons').then(response => {\n//       this.setState({\n//         buildings: response.data\n//       });\n//     });\n//   };\n//   handleInputChange = () => {\n//     this.setState(\n//       {\n//         query: this.search.value\n//       },\n//       () => {\n//         if (this.state.query && this.state.query.length > 1) {\n//           if (this.state.query.length % 2 === 0) {\n//             this.getInfo();\n//           }\n//         } else if (!this.state.query) {\n//         }\n//       }\n//     );\n//   };\n//   render() {\n//     return (\n//       <form>\n//         <input\n//           color='black'\n//           placeholder='Search...'\n//           ref={input => (this.search = input)}\n//           onChange={this.handleInputChange}\n//         />\n//         <Suggestions results={this.state.buildings} />\n//       </form>\n//     );\n//   }\n// }\n\nexport class Searchbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buildings: [],\n      suggestions: [],\n      text: ''\n    };\n\n    this.getInfo = () => {\n      axios.get('http://localhost:4000/polygons').then(response => {\n        this.setState({\n          buildings: response.data\n        });\n      });\n    };\n\n    this.onTextChanged = e => {\n      const value = e.target.value;\n      let suggestions = [];\n\n      if (value.length > 0) {\n        const regex = new RegExp(\"^\".concat(value), 'i');\n        suggestions = this.state.buildings.map(building => building.name).sort().filter(v => regex.test(v));\n      }\n\n      this.setState(() => ({\n        suggestions,\n        text: value\n      }));\n    };\n  }\n\n  renderSuggestions() {\n    const suggestions = this.state.suggestions;\n\n    if (suggestions.length === 0) {\n      return null;\n    }\n\n    return React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, suggestions.map(building => React.createElement(\"li\", {\n      onClick: () => this.suggestionSelected(building),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, building)));\n  }\n\n  suggestionSelected(value) {\n    this.setState(() => ({\n      text: value,\n      suggestions: []\n    }));\n  }\n\n  render() {\n    const text = this.state.text;\n    return React.createElement(\"div\", {\n      className: \"autoCompleteText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      value: text,\n      onChange: this.onTextChanged,\n      placeholder: \"Search...\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), this.renderSuggestions());\n  }\n\n}\nexport default Searchbar;","map":{"version":3,"sources":["/Users/reisturm/Desktop/Projects/interactivemap/src/components/Searchbar.js"],"names":["React","Component","axios","Suggestions","Searchbar","state","buildings","suggestions","text","getInfo","get","then","response","setState","data","onTextChanged","e","value","target","length","regex","RegExp","map","building","name","sort","filter","v","test","renderSuggestions","suggestionSelected","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,sBAAP;AACA,OAAOC,WAAP,MAAwB,eAAxB,C,CAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,SAAN,SAAwBH,SAAxB,CAAkC;AAAA;AAAA;AAAA,SACvCI,KADuC,GAC/B;AACNC,MAAAA,SAAS,EAAE,EADL;AAENC,MAAAA,WAAW,EAAE,EAFP;AAGNC,MAAAA,IAAI,EAAE;AAHA,KAD+B;;AAAA,SAOvCC,OAPuC,GAO7B,MAAM;AACdP,MAAAA,KAAK,CAACQ,GAAN,CAAU,gCAAV,EAA4CC,IAA5C,CAAiDC,QAAQ,IAAI;AAC3D,aAAKC,QAAL,CAAc;AACZP,UAAAA,SAAS,EAAEM,QAAQ,CAACE;AADR,SAAd;AAGD,OAJD;AAKD,KAbsC;;AAAA,SAevCC,aAfuC,GAevBC,CAAC,IAAI;AACnB,YAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB;AACA,UAAIV,WAAW,GAAG,EAAlB;;AACA,UAAIU,KAAK,CAACE,MAAN,GAAe,CAAnB,EAAsB;AACpB,cAAMC,KAAK,GAAG,IAAIC,MAAJ,YAAeJ,KAAf,GAAwB,GAAxB,CAAd;AACAV,QAAAA,WAAW,GAAG,KAAKF,KAAL,CAAWC,SAAX,CACXgB,GADW,CACPC,QAAQ,IAAIA,QAAQ,CAACC,IADd,EAEXC,IAFW,GAGXC,MAHW,CAGJC,CAAC,IAAIP,KAAK,CAACQ,IAAN,CAAWD,CAAX,CAHD,CAAd;AAID;;AACD,WAAKd,QAAL,CAAc,OAAO;AAAEN,QAAAA,WAAF;AAAeC,QAAAA,IAAI,EAAES;AAArB,OAAP,CAAd;AACD,KA1BsC;AAAA;;AA4BvCY,EAAAA,iBAAiB,GAAG;AAAA,UACVtB,WADU,GACM,KAAKF,KADX,CACVE,WADU;;AAElB,QAAIA,WAAW,CAACY,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B,aAAO,IAAP;AACD;;AACD,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGZ,WAAW,CAACe,GAAZ,CAAgBC,QAAQ,IACvB;AAAI,MAAA,OAAO,EAAE,MAAM,KAAKO,kBAAL,CAAwBP,QAAxB,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuDA,QAAvD,CADD,CADH,CADF;AAOD;;AAEDO,EAAAA,kBAAkB,CAACb,KAAD,EAAQ;AACxB,SAAKJ,QAAL,CAAc,OAAO;AAAEL,MAAAA,IAAI,EAAES,KAAR;AAAeV,MAAAA,WAAW,EAAE;AAA5B,KAAP,CAAd;AACD;;AACDwB,EAAAA,MAAM,GAAG;AAAA,UACCvB,IADD,GACU,KAAKH,KADf,CACCG,IADD;AAEP,WACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAEA,IADT;AAEE,MAAA,QAAQ,EAAE,KAAKO,aAFjB;AAGE,MAAA,WAAW,EAAC,WAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOG,KAAKc,iBAAL,EAPH,CADF;AAWD;;AA1DsC;AA6DzC,eAAezB,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport '../css/Searchbar.css';\nimport Suggestions from './Suggestions';\n\n// export class Searchbar extends Component {\n//   state = {\n//     query: '',\n//     buildings: []\n//   };\n\n//   getInfo = () => {\n//     axios.get('http://localhost:4000/polygons').then(response => {\n//       this.setState({\n//         buildings: response.data\n//       });\n//     });\n//   };\n\n//   handleInputChange = () => {\n//     this.setState(\n//       {\n//         query: this.search.value\n//       },\n//       () => {\n//         if (this.state.query && this.state.query.length > 1) {\n//           if (this.state.query.length % 2 === 0) {\n//             this.getInfo();\n//           }\n//         } else if (!this.state.query) {\n//         }\n//       }\n//     );\n//   };\n\n//   render() {\n//     return (\n//       <form>\n//         <input\n//           color='black'\n//           placeholder='Search...'\n//           ref={input => (this.search = input)}\n//           onChange={this.handleInputChange}\n//         />\n//         <Suggestions results={this.state.buildings} />\n//       </form>\n//     );\n//   }\n// }\n\nexport class Searchbar extends Component {\n  state = {\n    buildings: [],\n    suggestions: [],\n    text: ''\n  };\n\n  getInfo = () => {\n    axios.get('http://localhost:4000/polygons').then(response => {\n      this.setState({\n        buildings: response.data\n      });\n    });\n  };\n  // function that is called whenever input changes\n  onTextChanged = e => {\n    const value = e.target.value;\n    let suggestions = [];\n    if (value.length > 0) {\n      const regex = new RegExp(`^${value}`, 'i');\n      suggestions = this.state.buildings\n        .map(building => building.name)\n        .sort()\n        .filter(v => regex.test(v));\n    }\n    this.setState(() => ({ suggestions, text: value }));\n  };\n\n  renderSuggestions() {\n    const { suggestions } = this.state;\n    if (suggestions.length === 0) {\n      return null;\n    }\n    return (\n      <ul>\n        {suggestions.map(building => (\n          <li onClick={() => this.suggestionSelected(building)}>{building}</li>\n        ))}\n      </ul>\n    );\n  }\n\n  suggestionSelected(value) {\n    this.setState(() => ({ text: value, suggestions: [] }));\n  }\n  render() {\n    const { text } = this.state;\n    return (\n      <div className='autoCompleteText'>\n        <input\n          value={text}\n          onChange={this.onTextChanged}\n          placeholder='Search...'\n          type='text'\n        />\n        {this.renderSuggestions()}\n      </div>\n    );\n  }\n}\n\nexport default Searchbar;\n"]},"metadata":{},"sourceType":"module"}